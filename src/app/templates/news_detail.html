{% extends "web_base.html" %}

{% block title %}{{ article.title }} - ÚˆÛŒÙ„ÛŒ Ù¾Ø±ÙˆØ§Ù†{% endblock %}

{% block head_extra %}
  <meta name="description" content="{{ article.summary[:160] | default('ÚˆÛŒÙ„ÛŒ Ù¾Ø±ÙˆØ§Ù† Ú©ÛŒ ØªØ§Ø²Û Ø®Ø¨Ø± Ù¾Ú‘Ú¾ÛŒÚº', true) }}">
  <meta name="keywords" content="{{ article.title }}, ÚˆÛŒÙ„ÛŒ Ù¾Ø±ÙˆØ§Ù†, Ø§Ø±Ø¯Ùˆ Ø®Ø¨Ø±ÛŒÚº, Urdu News">
  <meta name="author" content="Daily Parwan">
  <meta name="description" content="{{ article.summary | default(article.title) | truncate(160, True) }}">
  <meta name="keywords" content="{{ article.title }}, ÚˆÛŒÙ„ÛŒ Ù¾Ø±ÙˆØ§Ù†, Urdu News, {{ article.category.name }}">
  <meta property="og:title" content="{{ article.title }} - ÚˆÛŒÙ„ÛŒ Ù¾Ø±ÙˆØ§Ù†">
  <meta property="og:description" content="{{ article.summary | default(article.title) | truncate(160, True) }}">
  <meta property="og:image" content="{{ request.url_for('static', path=article.image_url) if article.image_url else request.url_for('static', path='images/placeholder.jpg') }}">
  <meta property="og:url" content="{{ request.url }}">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ article.title }} - ÚˆÛŒÙ„ÛŒ Ù¾Ø±ÙˆØ§Ù†">
  <meta name="twitter:description" content="{{ article.summary | default(article.title) | truncate(160, True) }}">
  <meta name="twitter:image" content="{{ request.url_for('static', path=article.image_url) if article.image_url else request.url_for('static', path='images/placeholder.jpg') }}">

  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="{{ article.title }} - ÚˆÛŒÙ„ÛŒ Ù¾Ø±ÙˆØ§Ù†" />
  <meta property="og:description" content="{{ article.summary[:160] | default('ÚˆÛŒÙ„ÛŒ Ù¾Ø±ÙˆØ§Ù† Ú©ÛŒ ØªØ§Ø²Û Ø®Ø¨Ø± Ù¾Ú‘Ú¾ÛŒÚº', true) }}" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="{{ request.url }}" />
  <meta property="og:image" content="{{ request.url_root ~ article.image_url if article.image_url else request.url_root ~ 'static/images/placeholder.jpg' }}" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{{ article.title }} - ÚˆÛŒÙ„ÛŒ Ù¾Ø±ÙˆØ§Ù†" />
  <meta name="twitter:description" content="{{ article.summary[:160] | default('ÚˆÛŒÙ„ÛŒ Ù¾Ø±ÙˆØ§Ù† Ú©ÛŒ ØªØ§Ø²Û Ø®Ø¨Ø± Ù¾Ú‘Ú¾ÛŒÚº', true) }}" />
  <meta name="twitter:image" content="{{ request.url_root ~ article.image_url if article.image_url else request.url_root ~ 'static/images/placeholder.jpg' }}" />
{% endblock %}

{% block content %}
<div class="container my-4" dir="rtl">
  <div class="row justify-content-center">
    <div class="col-lg-9 col-md-10 bg-white shadow-sm rounded p-4"
         style="font-family: 'Noto Nastaliq Urdu', serif; line-height: 2;">

      <!-- ðŸ“° Ø®Ø¨Ø± Ú©Ø§ Ø¹Ù†ÙˆØ§Ù† -->
      <h1 class="fw-bold text-end mb-2" style="font-size: 2rem;">
        {{ article.title }}
      </h1>

      <!-- ðŸ—“ï¸ Ø§Ø´Ø§Ø¹Øª Ú©ÛŒ ØªØ§Ø±ÛŒØ® -->
      <p class="text-muted text-end mb-3" style="font-size: 0.9rem;">
        {{ article.created_at.strftime('%d %B %Y') }}
      </p>

      <!-- ðŸ–¼ï¸ ØªØµÙˆÛŒØ± -->
      <div class="text-center mb-4">
        {% if article.image_url %}
          <img src="/{{ article.image_url }}"
               alt="{{ article.title }}"
               class="img-fluid rounded w-100"
               style="max-height: 400px; object-fit: cover;"
               onerror="this.onerror=null;this.src='/static/images/placeholder.jpg';">
        {% else %}
          <img src="/static/images/placeholder.jpg"
               alt="Ú©ÙˆØ¦ÛŒ ØªØµÙˆÛŒØ± Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛÛŒÚº"
               class="img-fluid rounded w-100"
               style="max-height: 400px; object-fit: cover;">
        {% endif %}
      </div>

      <!-- ðŸ“„ Ø®Ù„Ø§ØµÛ -->
      {% if article.summary %}
        <p class="lead text-end text-dark mb-4" style="font-size: 1.2rem;">
          {{ article.summary }}
        </p>
      {% endif %}

      <!-- ðŸ“œ Ù…Ú©Ù…Ù„ ØªÙØµÛŒÙ„ -->
      <div class="article-content text-end text-dark"
           style="font-size: 1.05rem; white-space: pre-line;"
           dir="rtl">
        {{ article.content | safe }}
      </div>

    </div>
  </div>
</div>
{% endblock %}
